<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<HBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="tn.esprit.controllers.PostController"
      stylesheets="@/css/sidebarFront.css, @/css/post-styles.css"
      spacing="24"
      prefHeight="600"
      prefWidth="1000">

    <!-- LEFT SIDEBAR -->
    <fx:include fx:id="sidebar" source="/interfaces/Front/Sidebar.fxml"/>


    <!-- MAIN CONTENT AREA -->
    <VBox spacing="20" HBox.hgrow="ALWAYS" styleClass="post-container">
        <!-- Header Section -->
        <HBox styleClass="header-container">
            <ImageView fitWidth="200" fitHeight="150" preserveRatio="true">
                <Image url="@/images/post.gif"/>
            </ImageView>
            <VBox>

                <Text styleClass="header-title" text="What's on your mind? ðŸ’¡"/>
                <Text styleClass="header-subtitle"
                      text="Post about your latest study session, share an interesting fact, or ask a question."/>
            </VBox>
        </HBox>
        <!-- Replace TextField with Label -->
        <Label fx:id="forumTitle" styleClass="forum-title" text="Forum Title" />

        <!-- Create Post Section -->
        <VBox fx:id="postInputContainer" spacing="10" alignment="TOP_CENTER" styleClass="create-post-container">
            <TextArea fx:id="postContent" promptText="What's on your mind?"
                      styleClass="post-input"/>

            <FlowPane fx:id="photosFlowPane" hgap="5" vgap="5"/>

            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Label fx:id="charCountLabel" />
            </HBox>
            <HBox spacing="10">
                <Button text="Add Photos" styleClass="media-btn" onAction="#handleAddPhotos"/>
                <Button fx:id="submitPostBtn" text="Post" styleClass="submit-post-btn" onAction="#handleCreatePost"/>
            </HBox>
            <!-- Error Labels -->
            <Label fx:id="contentErrorLabel" styleClass="error-label" visible="false" />
            <Label fx:id="moderationErrorLabel" styleClass="error-label" visible="false" />
            <Label fx:id="sentimentErrorLabel" styleClass="error-label" visible="false" />


        </VBox>
        <!-- Add after sentimentErrorLabel -->
        <VBox fx:id="writingFeedbackContainer" visible="false" spacing="5" styleClass="feedback-container">
            <Label text="Writing Suggestions:" styleClass="feedback-title"/>
            <ListView fx:id="writingIssuesList" styleClass="feedback-list"/>
        </VBox>


        <!-- Posts List -->
        <ListView fx:id="postsListView" styleClass="posts-list" VBox.vgrow="ALWAYS"/>
    </VBox>
</HBox>
